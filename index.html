<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dulpan Adi Saragih • Support</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
    <link rel="shortcut icon" href="favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="PAY TO DULPAN AS" />
    <link rel="manifest" href="favicon/site.webmanifest" />
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #6366F1, #3B82F6);
            --secondary-gradient: linear-gradient(135deg, #10B981, #34D399);
        }
        body { 
            font-family: 'Inter', sans-serif;
            background: linear-gradient(160deg, #0F172A, #1E293B, #0F172A);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        .glow-button:hover {
            box-shadow: 0px 0px 15px 3px rgba(99, 102, 241, 0.8);
            transform: scale(1.05);
        }
        .loading-bar {
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, #6366F1, #3B82F6);
            animation: loading 2s linear infinite;
        }
        @keyframes loading {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .payment-button {
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 15px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 4px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s; 
            width: 100%;
        }
        .payment-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
        }
        .payment-button svg {
            margin-right: 10px;
            fill: white;
            width: 20px;
            height: 20px;
        }
        
        .animate-pulse-light {
            animation: pulse-light 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse-light {
            0%, 100% {
                opacity: 1;
                box-shadow: 0px 0px 0px 0px rgba(99, 102, 241, 0.7);
            }
            50% {
                opacity: 0.7;
                box-shadow: 0px 0px 10px 5px rgba(99, 102, 241, 0.4);
            }
        }
        
        .manual-payment-container {
            position: relative;
            overflow: hidden;
        }
        .card-slider {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);
            touch-action: pan-y;
        }
        .payment-card-new {
            flex-shrink: 0;
            width: 100%;
            padding: 1rem 0.75rem;
            border-radius: 1rem;
            background: linear-gradient(160deg, #0F172A, #1E293B, #0F172A);
            border: 0.5px solid rgba(79, 70, 229, 0.5);
            position: relative;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            transition: all 0.5s ease-in-out;
            margin-bottom: 1rem;
        }
        .payment-card-new.active {
            box-shadow: 0 0 25px rgba(99, 102, 241, 0.5);
            transform: scale(1.05);
        }
        .payment-card-new:hover {
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
        }

        .slider-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
        }
        .modal-container {
            position: relative;
            max-width: 350px;
            width: 80%;
            margin: 0 auto;
            background: linear-gradient(145deg, #1E293B, #0F172A);
            border: 1px solid #4F46E5;
            border-radius: 1.25rem;
            padding: 1.25rem;
        }
        .close-button-container {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            z-index: 60;
            transition: transform 0.3s ease-in-out;
        }
        .close-button-container:hover {
            transform: scale(1.2);
        }
        .swal2-confirm {
            background-color: #25D366 !important;
        }
        .swal2-styled.swal2-confirm {
            background-color: #25D366 !important;
            color: #fff !important;
        }
        .swal2-styled.swal2-confirm:hover {
            background-color: #128C7E !important;
        }
        .swal2-styled .button-icon {
            width: 18px;
            height: 18px;
            margin-right: 6px;
            fill: currentColor;
            vertical-align: middle;
        }
        .swal2-actions > button {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            padding: 0.625rem 1rem;
        }
        .swal2-actions > button svg {
            margin-right: 6px;
        }
        
        /* GAYA BARU: QR CODE MODAL */
        #qrModal.modal.active {
            opacity: 1;
            visibility: visible;
        }
        #qrModal.modal .modal-content {
            transform: scale(1);
        }
        #qrModal.modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: visibility 0s, opacity 0.5s;
        }
        #qrModal .modal-content {
            background: linear-gradient(145deg, #1E293B, #0F172A);
            border: 1px solid #4F46E5;
            border-radius: 1.25rem;
            padding: 2rem;
            max-width: 90%;
            width: 350px;
            text-align: center;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.5s;
        }
        #qrModal #qrCodeDisplay {
            width: 100%;
            height: auto;
            max-width: 250px;
            margin: 0 auto;
            display: block;
            background-color: white;
            padding: 1rem;
            border-radius: 0.5rem;
        }

        /* Gaya baru untuk tombol Salin di modal pembayaran manual */
        .copy-button {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: bold;
            color: white;
            background: linear-gradient(135deg, #6366F1, #3B82F6); /* Gradien biru-ungu */
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .copy-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
            filter: brightness(1.1);
        }
        .copy-button svg {
            margin-right: 0.5rem;
            width: 1.25rem;
            height: 1.25rem;
            fill: currentColor;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100">

    <div class="w-full max-w-md bg-slate-900/80 backdrop-blur-sm p-6 rounded-3xl shadow-2xl border border-indigo-600 space-y-6">
        <div class="flex flex-col items-center space-y-3">
            <div class="h-24 w-24 rounded-full overflow-hidden border-4 border-indigo-500 shadow-lg animate-pulse-light">
                <img src="/Asset/dulpansrgih.png" alt="Profile" class="w-full h-full object-cover">
            </div>
            <h1 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-sky-400">Dulpan Adi Saragih</h1>
            <p class="text-gray-400 text-sm">Terima kasih atas donasi dan dukungannya!</p>
        </div>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-400 mb-2"><b>Nominal (IDR)</b></label>
                <div class="relative">
                    <input type="text" id="nominalInput" class="w-full px-4 py-3 bg-slate-800 text-gray-100 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 text-lg" placeholder="Masukkan Nominal" onkeyup="formatNominal(this)" inputmode="numeric" pattern="[0-9]*">
                    <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500">IDR</span>
                </div>
                <div class="block text-sm font-medium text-gray-600 mb-3"> Pembayaran via <i>Qris</i> minimal 1 Rupiah</div>
            </div>

            <div class="grid grid-cols-3 gap-3">
                <button onclick="setNominal(5000)" class="px-4 py-2 bg-slate-800 border border-gray-700 rounded-xl text-gray-300 hover:bg-slate-700 transition duration-300">Rp 5rb</button>
                <button onclick="setNominal(10000)" class="px-4 py-2 bg-slate-800 border border-gray-700 rounded-xl text-gray-300 hover:bg-slate-700 transition duration-300">Rp 10rb</button>
                <button onclick="setNominal(25000)" class="px-4 py-2 bg-slate-800 border border-gray-700 rounded-xl text-gray-300 hover:bg-slate-700 transition duration-300">Rp 25rb</button>
                <button onclick="setNominal(50000)" class="px-4 py-2 bg-slate-800 border border-gray-700 rounded-xl text-gray-300 hover:bg-slate-700 transition duration-300">Rp 50rb</button>
                <button onclick="setNominal(100000)" class="px-4 py-2 bg-slate-800 border border-gray-700 rounded-xl text-gray-300 hover:bg-slate-700 transition duration-300">Rp 100rb</button>
                <button onclick="setNominal(200000)" class="px-4 py-2 bg-slate-800 border border-gray-700 rounded-xl text-gray-300 hover:bg-slate-700 transition duration-300">Rp 200rb</button>
            </div>

            <button id="convertBtn" class="w-full py-4 text-center rounded-2xl text-white font-bold text-lg bg-gradient-to-r from-indigo-600 to-blue-500 hover:from-indigo-700 hover:to-blue-600 transition-all duration-300 transform hover:scale-105 shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" class="inline-block w-6 h-6 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M4 4h7v7H4zm0 9h7v7H4zm9-9h7v7h-7zm0 9h7v7h-7z"/></svg>
                Bayar dengan QRIS
            </button>
            
            <button onclick="openManualPaymentModal()" class="w-full py-4 text-center rounded-2xl text-white font-bold text-lg bg-slate-700 hover:bg-slate-600 transition-all duration-300 transform hover:scale-105 shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" class="inline-block w-6 h-6 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M19 19H5V8h14m-3-7h-8a2 2 0 0 0-2 2v2h12V3a2 2 0 0 0-2-2m-1 8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1Z"/></svg>
                Metode Pembayaran Lain
            </button>
        </div>
        
        <div class="text-center text-gray-500 text-xs mt-6">
            <p>Create by ❤️ Dulpan Adi Saragih</p>
        </div>
    </div>
    
    <div id="manualPaymentModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-70 transition-opacity duration-300 opacity-0 hidden">
        <div class="modal-container transition-transform duration-300 transform scale-95">
            <div class="close-button-container" onclick="closeModal()">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 hover:text-white cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </div>
            <h2 class="text-2xl font-bold text-white mb-2 text-center">Metode Pembayaran</h2>
            <p class="text-gray-400 text-sm mb-6 text-center">Pilih metode manual di bawah ini</p>
            
            <div class="manual-payment-container">
                <div id="cardSlider" class="card-slider">
                    <div class="payment-card-new">
                        <img src="/Asset/BRI.png" alt="BRI" class="h-10 mb-4">
                        <p class="text-gray-300 text-sm mb-1"><b>Bank Rakyat Indonesia</b></p>
                        <p class="text-lg font-bold text-white mb-2">015* **** **** *09</p>
                        <p class="text-gray-400 text-xs mb-4">a/n Dulpan Adi Saragih</p>
                        <button onclick="copyToClipboard('015601058779509')" class="copy-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4a2 2 0 0 0-2 2v14h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"/></svg>
                            Salin No. Rekening
                        </button>
                    </div>
                    <div class="payment-card-new">
                        <img src="/Asset/SEABANK.png" alt="SEABANK" class="h-10 mb-4">
                        <p class="text-gray-300 text-sm mb-1"><b>Bank SeaBank Indonesia</b></p>
                        <p class="text-lg font-bold text-white mb-2">901* **** *795</p>
                        <p class="text-gray-400 text-xs mb-4">a/n Dulpan Adi Saragih</p>
                        <button onclick="copyToClipboard('901034669795')" class="copy-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4a2 2 0 0 0-2 2v14h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"/></svg>
                            Salin No. Rekening
                        </button>
                    </div>
                    <div class="payment-card-new">
                        <img src="/Asset/SPAY.png" alt="SPAY" class="h-10 mb-4">
                        <p class="text-gray-300 text-sm mb-1"><b>Shopee Pay</b></p>
                        <p class="text-lg font-bold text-white mb-2">085* **** *941</p>
                        <p class="text-gray-400 text-xs mb-4">a/n Dulpan Adi Saragih</p>
                        <button onclick="copyToClipboard('085229592941')" class="copy-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4a2 2 0 0 0-2 2v14h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"/></svg>
                            Salin No. ShopeePay
                        </button>
                    </div>
                    <div class="payment-card-new">
                        <img src="/Asset/DANA.png" alt="DANA" class="h-10 mb-4">
                        <p class="text-gray-300 text-sm mb-1"><b>Dompet Digital Indonesia (DANA)</b></p>
                        <p class="text-lg font-bold text-white mb-2">085* **** *941</p>
                        <p class="text-gray-400 text-xs mb-4">a/n Dulpan Adi Saragih</p>
                        <button onclick="copyToClipboard('085229592941')" class="copy-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4a2 2 0 0 0-2 2v14h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"/></svg>
                            Salin No. DANA
                        </button>
                    </div>
                    <div class="payment-card-new">
                        <img src="/Asset/OVO.png" alt="OVO" class="h-10 mb-4">
                        <p class="text-gray-300 text-sm mb-1"><b>Visionet Internasional (OVO)</b></p>
                        <p class="text-lg font-bold text-white mb-2">085* **** *941</p>
                        <p class="text-gray-400 text-xs mb-4">a/n Dulpan Adi Saragih</p>
                        <button onclick="copyToClipboard('085229592941')" class="copy-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4a2 2 0 0 0-2 2v14h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"/></svg>
                            Salin No. OVO
                        </button>
                    </div>
                    <div class="payment-card-new">
                        <img src="/Asset/PAYPAL.png" alt="PAYPAL" class="h-10 mb-4">
                        <p class="text-gray-300 text-sm mb-1"><b>Demo Payment Wallet</b></p>
                        <p class="text-lg font-bold text-white mb-2">0852 2959 2941</p>
                        <p class="text-gray-400 text-xs mb-4">a/n Dulpan Adi Saragih</p>
                        <a href="tel:085229592941" class="w-full py-3 rounded-xl text-white font-bold bg-gradient-to-r from-violet-600 to-indigo-500 hover:from-violet-700 hover:to-indigo-600 transition-all flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 14h-2V8h2v8zm-2-12h2V4h-2v12z"/>
                            </svg>
                            PAY NOW!
                        </a>
                    </div>


                </div>
            </div>
            
            <div class="flex justify-center mt-4 space-x-2">
                <span class="dot w-3 h-3 bg-gray-600 rounded-full cursor-pointer transition-colors" onclick="currentCardIndex = 0; updateSlider()"></span>
                <span class="dot w-3 h-3 bg-gray-600 rounded-full cursor-pointer transition-colors" onclick="currentCardIndex = 1; updateSlider()"></span>
                <span class="dot w-3 h-3 bg-gray-600 rounded-full cursor-pointer transition-colors" onclick="currentCardIndex = 2; updateSlider()"></span>
                <span class="dot w-3 h-3 bg-gray-600 rounded-full cursor-pointer transition-colors" onclick="currentCardIndex = 3; updateSlider()"></span>
                <span class="dot w-3 h-3 bg-gray-600 rounded-full cursor-pointer transition-colors" onclick="currentCardIndex = 4; updateSlider()"></span>
                <span class="dot w-3 h-3 bg-gray-600 rounded-full cursor-pointer transition-colors" onclick="currentCardIndex = 5; updateSlider()"></span>
            </div>
            
        </div>
    </div>

    <div id="qrModal" class="modal">
        <div class="modal-content">
            <button onclick="closeQRModal()" class="close-button-container" aria-label="Close modal">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 hover:text-white cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2 class="text-2xl font-bold text-white mb-2 text-center">Scan QRIS</h2>
            <p class="text-gray-400 text-sm mb-4 text-center">Gunakan aplikasi perbankan atau e-wallet Anda.</p>
            <div id="qr-container" class="my-4">
                <img id="qrCodeDisplay" src="" alt="QR Code" class="w-full h-auto">
            </div>
            <p class="text-gray-400 text-sm mb-2">Nominal:</p>
            <h3 id="qrNominalText" class="text-white text-3xl font-bold mb-4"></h3>
            
            <div class="flex flex-col space-y-3">
                <button onclick="confirmWhatsApp()" class="py-3 px-6 rounded-xl text-white font-bold bg-[#25D366] hover:bg-[#128C7E] transition-colors duration-300 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12.04 2.87c-5.46 0-9.92 4.45-9.92 9.93 0 1.94.55 3.75 1.54 5.34l-1.6 4.88 5.02-1.57a9.88 9.88 0 0 0 4.96 1.34c5.46 0 9.92-4.46 9.92-9.93s-4.46-9.92-9.92-9.92zm4.33 13.93s-.26-.14-1.29-.63c-.15-.08-.85-.41-.98-.46-.14-.07-.29-.08-.42.08-.13.16-.5.63-.61.76-.11.13-.23.15-.43.04-.21-.11-1.03-.38-1.97-1.22-.73-.65-1.22-1.46-1.35-1.68-.14-.2-.01-.31.11-.42.1-.1.22-.25.33-.37.11-.12.14-.2.2-.33.06-.12.03-.23-.09-.58-.12-.34-.98-2.36-1.34-3.23-.35-.87-.71-.75-.98-.77s-.59-.02-.91-.02c-.32 0-.85.12-1.16.41-.31.29-1.18 1.15-1.18 2.82 0 1.68 1.21 3.27 1.38 3.49.17.22 2.39 3.82 5.79 5.25 3.39 1.44 3.48.97 4.1.91.61-.06 1.95-.79 2.23-1.64.28-.85.28-1.58.19-1.74-.08-.15-.31-.24-.65-.41z"/>
                    </svg>
                    Konfirmasi via WhatsApp
                </button>
                <button onclick="downloadQRCode()" class="py-3 px-6 rounded-xl text-white font-bold bg-indigo-600 hover:bg-indigo-700 transition-colors duration-300 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18h14v2H5z"/></svg>
                    Unduh QR Code
                </button>
            </div>
        </div>
    </div>

    <script>
        const STATIC_QRIS = "00020101021126690021ID.CO.BANKMANDIRI.WWW01189360000801165178860211711651788620303UMI51440014ID.CO.QRIS.WWW0215ID10222328889510303UMI5204573253033605802ID5918DULPAN ADI SARAGIH6012Sleman (Kab)61055528562070703A0163046EB4";
        const WHATSAPP_NUMBER = "6285229592941";

        function formatNominal(input) {
            let value = input.value.replace(/\D/g, '');
            if (value) {
                value = parseInt(value).toLocaleString('id-ID');
                input.value = value;
            }
        }

        function setNominal(value) {
            const input = document.getElementById('nominalInput');
            input.value = value.toLocaleString('id-ID');
        }

        function ConvertCRC16(str) {
            let crc = 0xFFFF;
            for (let c = 0; c < str.length; c++) {
                crc ^= str.charCodeAt(c) << 8;
                for (let i = 0; i < 8; i++) {
                    crc = (crc & 0x8000) ? (crc << 1) ^ 0x1021 : crc << 1;
                }
            }
            return (crc & 0xFFFF).toString(16).toUpperCase().padStart(4, '0');
        }

        function openQRModal(qrDataURL, nominalValue) {
            const modal = document.getElementById('qrModal');
            const qrCodeImage = document.getElementById('qrCodeDisplay');
            const nominalText = document.getElementById('qrNominalText');

            qrCodeImage.src = qrDataURL;
            nominalText.innerText = `Rp ${nominalValue}`;

            modal.classList.add('active');
        }

        function closeQRModal() {
            const modal = document.getElementById('qrModal');
            modal.classList.remove('active');
        }

        function generateQRCode(text) {
            const nominalInput = document.getElementById('nominalInput');
            const qty = nominalInput.value.replace(/\D/g, '');

            if (!qty || isNaN(qty) || parseInt(qty) < 1) {
                Swal.fire({ icon: 'error', title: 'Nominal Tidak Valid', text: 'Masukkan angka nominal terlebih dahulu.', confirmButtonColor: '#3B82F6' });
                return;
            }

            const qr = qrcode(0, 'M');
            qr.addData(text);
            qr.make();

            const qrDataURL = qr.createDataURL(10);
            const nominalValue = nominalInput.value;

            openQRModal(qrDataURL, nominalValue);
        }
        
        function convertQRIS() {
            const nominalInput = document.getElementById('nominalInput');
            const qty = nominalInput.value.replace(/\D/g, '');

            if (!qty || isNaN(qty) || parseInt(qty) < 1) {
                Swal.fire({ icon: 'error', title: 'Nominal Tidak Valid', text: 'Masukkan angka nominal terlebih dahulu.', confirmButtonColor: '#3B82F6' });
                return;
            }

            Swal.fire({
                title: "Konfirmasi Donasi",
                text: `Anda akan mendonasikan IDR ${parseInt(qty).toLocaleString('id-ID')}. Lanjutkan?`,
                icon: "warning",
                showCancelButton: true,
                confirmButtonText: "Ya, lanjutkan!",
                cancelButtonText: "Batal",
                confirmButtonColor: "#10B981",
                customClass: {
                    popup: 'bg-slate-900/80 text-white border border-indigo-600',
                    confirmButton: 'swal2-styled swal2-confirm',
                    cancelButton: 'swal2-styled'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    let qris = STATIC_QRIS.slice(0, -4);
                    let step1 = qris.replace("010211", "010212");
                    let step2 = step1.split("5802ID");
                    let uang = "54" + qty.length.toString().padStart(2, '0') + qty + "5802ID";
                    const finalQR = step2[0].trim() + uang + step2[1].trim() + ConvertCRC16(step2[0] + uang + step2[1]);
                    generateQRCode(finalQR);
                }
            });
        }

        function openManualPaymentModal() {
            const modal = document.getElementById('manualPaymentModal');
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modal.querySelector('.transform').classList.remove('scale-95');
            }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('manualPaymentModal');
            modal.classList.add('opacity-0');
            modal.querySelector('.transform').classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                Swal.fire({
                    icon: 'success',
                    title: 'Berhasil disalin!',
                    text: 'Nomor Rekening/e-Wallet berhasil disalin! Lanjut ke WhatsApp untuk konfirmasi?',
                    showConfirmButton: true,
                    showCancelButton: true,
                    confirmButtonText: 'WhatsApp',
                    cancelButtonText: 'Selesai',
                    customClass: {
                        popup: 'bg-slate-900/80 text-white border border-indigo-600',
                        confirmButton: 'swal2-styled swal2-confirm',
                        cancelButton: 'swal2-styled'
                    },
                }).then((result) => {
                    if (result.isConfirmed) {
                        const whatsappURL = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent('Halo, saya sudah melakukan transfer. Mohon konfirmasinya.')}`;
                        window.open(whatsappURL, '_blank');
                    }
                });
            }).catch(err => {
                Swal.fire({
                    icon: 'error',
                    title: 'Gagal Menyalin',
                    text: 'Terjadi kesalahan. Silakan coba salin manual.',
                    confirmButtonColor: '#3B82F6'
                });
            });
        }
        
        // Fungsi untuk tombol WhatsApp
        function confirmWhatsApp() {
            const nominalInput = document.getElementById('nominalInput');
            const nominalValue = nominalInput.value;
            const message = `Halo, saya sudah melakukan pembayaran via QRIS sebesar *Rp ${nominalValue}*. Mohon konfirmasinya.`;
            const whatsappURL = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
        }

        // Fungsi yang diperbarui untuk tombol Download
        function downloadQRCode() {
            const qrCodeImage = document.getElementById('qrCodeDisplay');
            const nominalValue = document.getElementById('nominalInput').value.replace(/\D/g, '');
            
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            const formattedDate = `${year}-${month}-${day}`;
            
            const link = document.createElement('a');
            link.href = qrCodeImage.src;
            link.download = `QRIS-${formattedDate}-${nominalValue}.png`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Slider Script
        let currentCardIndex = 0;
        const cardSlider = document.getElementById('cardSlider');
        const cards = document.querySelectorAll('.payment-card-new');
        const dots = document.querySelectorAll('.dot');
        let startX = 0;
        let isSwiping = false;

        function updateSlider() {
            const offset = -currentCardIndex * 100;
            cardSlider.style.transform = `translateX(${offset}%)`;

            cards.forEach((card, index) => {
                if (index === currentCardIndex) {
                    card.classList.add('active');
                } else {
                    card.classList.remove('active');
                }
            });
            
            dots.forEach((dot, index) => {
                dot.classList.remove('bg-indigo-500');
                dot.classList.add('bg-gray-600');
                if (index === currentCardIndex) {
                    dot.classList.add('bg-indigo-500');
                }
            });
        }

        function moveSlider(direction) {
            currentCardIndex += direction;
            if (currentCardIndex < 0) {
                currentCardIndex = cards.length - 1;
            } else if (currentCardIndex >= cards.length) {
                currentCardIndex = 0;
            }
            updateSlider();
        }
        
        // Tambahkan event listener untuk swipe
        cardSlider.addEventListener('touchstart', (e) => {
            isSwiping = true;
            startX = e.touches[0].clientX;
        });

        cardSlider.addEventListener('touchmove', (e) => {
            if (!isSwiping) return;
            const currentX = e.touches[0].clientX;
            const diffX = startX - currentX;
            cardSlider.style.transform = `translateX(${-currentCardIndex * 100 - (diffX / cardSlider.offsetWidth) * 100}%)`;
        });

        cardSlider.addEventListener('touchend', (e) => {
            if (!isSwiping) return;
            const endX = e.changedTouches[0].clientX;
            const diffX = startX - endX;
            
            if (Math.abs(diffX) > 50) { // Toleransi geser 50px
                if (diffX > 0) {
                    moveSlider(1); // Geser ke kiri
                } else {
                    moveSlider(-1); // Geser ke kanan
                }
            } else {
                updateSlider(); // Kembali ke posisi semula
            }
            isSwiping = false;
        });

        // Tambahkan event listener untuk klik dots
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                currentCardIndex = index;
                updateSlider();
            });
        });

        // Initialize slider and dots
        document.addEventListener('DOMContentLoaded', () => {
            updateSlider();
        });

        document.getElementById('convertBtn').addEventListener('click', convertQRIS);
    </script>
</body>
</html>
